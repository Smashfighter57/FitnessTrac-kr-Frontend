{"ast":null,"code":"import _asyncToGenerator from\"/home/drillcode/coursework/FitTrack/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/drillcode/coursework/FitTrack/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/drillcode/coursework/FitTrack/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var setToken=_ref.setToken;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();_context.next=4;return fetch('http://fitnesstrac-kr.herokuapp.com/api/guests/login',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({guest:{username:username,password:password}})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:result=_context.sent;console.log(\"result:\",result);setToken(result.data.token);setShowCredentialsError(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);setShowCredentialsError(true);console.error;case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function login(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{class:\"form-label\",for:\"inputUsername\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,placeholder:\"username\",onChange:function onChange(ev){setUsername(ev.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{class:\"form-label\",for:\"inputPassword\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,placeholder:\"password\",onChange:function onChange(ev){setPassword(ev.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})})]}),showCredentialsError?/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Incorrect username and password combination.\"}):null]});};export default Login;","map":{"version":3,"sources":["/home/drillcode/coursework/FitTrack/src/components/Login.js"],"names":["React","useState","Login","setToken","username","setUsername","password","setPassword","login","event","preventDefault","fetch","method","headers","body","JSON","stringify","guest","response","json","result","console","log","data","token","setShowCredentialsError","error","ev","target","value","showCredentialsError"],"mappings":"8WAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,C,6IAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAE1B,cAAgCF,QAAQ,CAAC,EAAD,CAAxC,wCAAOG,QAAP,eAAiBC,WAAjB,eACA,eAAgCJ,QAAQ,CAAC,EAAD,CAAxC,yCAAOK,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,KAAK,2FAAG,iBAAOC,KAAP,sJAENA,KAAK,CAACC,cAAN,GAFM,sBAGiBC,CAAAA,KAAK,CAAC,sDAAD,CAAyD,CACnFC,MAAM,CAAE,MAD2E,CAEnFC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF0E,CAKnFC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,KAAK,CAAE,CACLb,QAAQ,CAAEA,QADL,CAELE,QAAQ,CAAEA,QAFL,CADY,CAAf,CAL6E,CAAzD,CAHtB,QAGAY,QAHA,qCAeeA,CAAAA,QAAQ,CAACC,IAAT,EAff,QAeAC,MAfA,eAgBNC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAsBF,MAAtB,EACAjB,QAAQ,CAACiB,MAAM,CAACG,IAAP,CAAYC,KAAb,CAAR,CACAC,uBAAuB,CAAC,KAAD,CAAvB,CAlBM,iFAoBNA,uBAAuB,CAAC,IAAD,CAAvB,CACAJ,OAAO,CAACK,KAAR,CArBM,qEAAH,kBAALlB,CAAAA,KAAK,6CAAX,CAyBI,mBAAO,wCACP,6BADO,cAEP,cAAM,QAAQ,CAAEA,KAAhB,wBACE,oCACE,cAAO,KAAK,CAAC,YAAb,CAA0B,GAAG,CAAC,eAA9B,sBADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAEJ,QAA1B,CAAoC,WAAW,CAAC,UAAhD,CAA2D,QAAQ,CAAE,kBAACuB,EAAD,CAAM,CAACtB,WAAW,CAACsB,EAAE,CAACC,MAAH,CAAUC,KAAX,CAAX,CAA6B,CAAzG,EAFF,GADF,cAIE,oCACE,cAAO,KAAK,CAAC,YAAb,CAA0B,GAAG,CAAC,eAA9B,sBADF,cAEE,cAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAEvB,QAA9B,CAAwC,WAAW,CAAC,UAApD,CAA+D,QAAQ,CAAE,kBAACqB,EAAD,CAAM,CAACpB,WAAW,CAACoB,EAAE,CAACC,MAAH,CAAUC,KAAX,CAAX,CAA6B,CAA7G,EAFF,GAJF,cAOE,kCAAK,eAAQ,IAAI,CAAC,QAAb,mBAAL,EAPF,GAFO,CAWLC,oBAAoB,cAAG,YAAK,SAAS,CAAC,OAAf,0DAAH,CAA+E,IAX9F,GAAP,CAaD,CA3CP,CA6CM,cAAe5B,CAAAA,KAAf","sourcesContent":["import React, {useState} from \"react\";\n\nconst Login = ({setToken}) => {\n    \n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const login = async (event) => {\n        try {\n            event.preventDefault();\n            const response = await fetch('http://fitnesstrac-kr.herokuapp.com/api/guests/login', {\n              method: \"POST\",\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                guest: {\n                  username: username,\n                  password: password\n                }\n              })\n            })\n            const result = await response.json()\n            console.log(\"result:\",result)\n            setToken(result.data.token)\n            setShowCredentialsError(false)\n          } catch (error) {\n            setShowCredentialsError(true)\n            console.error\n          }\n        }\n      \n        return <>\n        <h1>LOGIN</h1>\n        <form onSubmit={login}>\n          <div>\n            <label class=\"form-label\" for=\"inputUsername\">Username</label>\n            <input type=\"text\" value={username} placeholder=\"username\" onChange={(ev)=>{setUsername(ev.target.value)}}/></div>\n          <div>\n            <label class=\"form-label\" for=\"inputPassword\">Password</label>\n            <input type=\"password\" value={password} placeholder=\"password\" onChange={(ev)=>{setPassword(ev.target.value)}}/></div>\n          <div><button type=\"submit\">Login</button></div>\n        </form>\n        { showCredentialsError ? <div className=\"error\">Incorrect username and password combination.</div> : null }\n        </>\n      }\n      \n      export default Login;"]},"metadata":{},"sourceType":"module"}